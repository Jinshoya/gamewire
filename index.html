<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=0.8">
    <link rel="stylesheet" type="text/css" href="./styles/baza.css" />
	    <link rel="stylesheet" type="text/css" href="./styles/bootstrap.css" />
    <title>Pepega</title>
</head>

<body>
<div class="container">
  <nav class="navbar navbar-expand-lg bg-light">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">
      <img src="/images/logo.svg" alt="" width="70" height="64" class="d-inline-block align-text-top">
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavDropdown">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="#">Главная</a>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Мероприятия
          </a>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
            <li><a class="dropdown-item" href="#">Будущие</a></li>
            <li><a class="dropdown-item" href="#">Прошедшие</a></li>
          </ul>
        </li>
      </ul>
    </div>
    </div>
  </nav>
        <div class="baza">
<table id="events" class="table table-striped" style="width:100%;">
        <thead class="table-dark">
            <tr style="">
                <th></th>
                <th>Мероприятие</th>
                <th>Дата</th>
                <th>Обратный Отсчёт</th>
                <th>Просмотр</th>
            </tr>
        </thead>
        <tbody class="align-middle">
            <tr style="background-image:#000; height:58px;">
				<td><div class="icon"><img src="./images/sgf.png" alt="Summer Game Fest EDT"></div></td>
                <td>Summer Game Fest</td>
                <td><div class="event_date" data-start-event-date="2022-06-09T14:00:00.000-04:00"></div></td>
                <td><div class="countdown"></div></td>
                <td>Твич | Ютуб</td>
            </tr>
            <tr>
				<td><div class="icon"><img src="./images/sgf.png" alt="Devolver Digital"></div></td>
                <td>Devolver Digital</td>
                <td><div class="event_date" data-start-event-date="2022-06-09T18:00:00.000-04:00"></div></td>
                <td><div class="countdown"></div></td>
                <td>Твич | Ютуб</td>
            </tr>
            <tr>
				<td><div class="icon"><img src="./images/sgf.png" alt="IGN Expo"></div></td>
                <td>IGN Expo</td>
                <td><div class="event_date" data-start-event-date="2022-06-10T12:00:00.000-04:00"></div></td>
                <td><div class="countdown"></div></td>
                <td>Твич | Ютуб</td>
            </tr>
            <tr>
				<td><div class="icon"><img src="./images/sgf.png" alt="Netflix Geeked Week: Games"></div></td>
                <td>Netflix Geeked Week: Games</td>
                <td><div class="event_date" data-start-event-date="2022-06-10T13:00:00.000-04:00"></div></td>
                <td><div class="countdown"></div></td>
                <td>Твич | Ютуб</td>
            </tr>
            <tr>
				<td><div class="icon"><img src="./images/sgf.png" alt="Tribeca Games Spotlight"></div></td>
                <td>Tribeca Games Spotlight</td>
                <td><div class="event_date" data-start-event-date="2022-06-10T15:00:00.000-04:00"></div></td>
                <td><div class="countdown"></div></td>
                <td>Твич | Ютуб</td>
            </tr>
            <tr>
				<td><div class="icon"><img src="./images/sgf.png" alt="Guerrilla Collective3"></div></td>
                <td>Guerrilla Collective3</td>
                <td><div class="event_date" data-start-event-date="2022-06-11T11:00:00.000-04:00"></div></td>
                <td><div class="countdown"></div></td>
                <td>Твич | Ютуб</td>
            </tr>
            <tr>
				<td><div class="icon"><img src="./images/sgf.png" alt="Wholesome Games Direc"></div></td>
                <td>Wholesome Games Direct</td>
                <td><div class="event_date" data-start-event-date="2022-06-11T12:30:00.000-04:00"></div></td>
                <td><div class="countdown"></div></td>
                <td>Твич | Ютуб</td>
            </tr>
            <tr>
				<td><div class="icon"><img src="./images/sgf.png" alt="Future Games Show"></div></td>
                <td>Future Games Show</td>
                <td><div class="event_date" data-start-event-date="2022-06-11T14:15:00.000-04:00"></div></td>
                <td><div class="countdown"></div></td>
                <td>Твич | Ютуб</td>
            </tr>
            <tr>
				<td><div class="icon"><img src="./images/sgf.png" alt="Xbox and Bethesda Games Showcase"></div></td>
                <td>Xbox and Bethesda Games Showcase</td>
                <td><div class="event_date" data-start-event-date="2022-06-12T13:00:00.000-04:00"></div></td>
                <td><div class="countdown"></div></td>
                <td>Твич | Ютуб</td>
            </tr>
            <tr>
				<td><div class="icon"><img src="./images/sgf.png" alt="PC Gaming Show"></div></td>
                <td>PC Gaming Show</td>
                <td><div class="event_date" data-start-event-date="2022-06-12T15:00:00.000-04:00"></div></td>
                <td><div class="countdown"></div></td>
                <td>Твич | Ютуб</td>
            </tr>
            <tr>
				<td><div class="icon"><img src="./images/sgf.png" alt="Guerrilla Collective3.5"></div></td>
                <td>Guerrilla Collective3.5</td>
                <td><div class="event_date" data-start-event-date="2022-06-12T16:00:00.000-04:00"></div></td>
                <td><div class="countdown"></div></td>
                <td>Твич | Ютуб</td>
            </tr>
            <tr>
				<td><div class="icon"><img src="./images/sgf.png" alt="Capcom Showcase"></div></td>
                <td>Capcom Showcase</td>
                <td><div class="event_date" data-start-event-date="2022-06-13T18:00:00.000-04:00"></div></td>
                <td><div class="countdown"></div></td>
                <td>Твич | Ютуб</td>
            </tr>
            <tr>
				<td><div class="icon"><img src="./images/sgf.png" alt="Capcom Showcase"></div></td>
                <td>Xbox Games Showcase Extended</td>
                <td><div class="event_date" data-start-event-date="2022-06-14T13:00:00.000-04:00"></div></td>
                <td><div class="countdown"></div></td>
                <td>Твич | Ютуб</td>
            </tr>
            <tr>
				<td><div class="icon"><img src="./images/sgf.png" alt="Steam Summer Sale"></div></td>
                <td>Steam Summer Sale</td>
                <td><div class="event_date" data-start-event-date="2022-06-23T13:00:00.000-04:00"></div></td>
                <td><div class="countdown"></div></td>
                <td>Твич | Ютуб</td>
            </tr>
            <tr>
				<td><div class="icon"><img src="./images/sgf.png" alt="THQ Nordic Showcase"></div></td>
                <td>THQ Nordic Showcase</td>
                <td><div class="event_date" data-start-event-date="2022-08-12T15:00:00.000-04:00"></div></td>
                <td><div class="countdown"></div></td>
                <td>Твич | Ютуб</td>
            </tr>
            <tr>
				<td><div class="icon"><img src="./images/sgf.png" alt="Gamescom Opening Night Live"></div></td>
                <td>Gamescom Opening Night Live</td>
                <td><div class="event_date" data-start-event-date="2022-08-23T13:00:00.000-04:00"></div></td>
                <td><div class="countdown"></div></td>
                <td>Твич | Ютуб</td>
            </tr>
        </tbody>
        <tfoot>
        </tfoot>
    </table>
        </div>
    </div>


    <script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>
	<script type="text/javascript" src="https://cdn.datatables.net/1.12.1/js/dataTables.bootstrap5.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="./scripts/baza.js"></script>



    <script>
        let event_date_divs = document.getElementsByClassName("event_date");
        let countdown_divs = document.getElementsByClassName("countdown");

        for(let i = 0; event_date_divs.length > i; i++){
            event_date_divs[i].innerHTML = new Date(Date.parse(event_date_divs[i].getAttribute("data-start-event-date"))).toLocaleString("ru-RU", {
                month: "long", day: "numeric", hour: "2-digit", minute: "2-digit"
            });
        }

        for(let i = 0; event_date_divs.length > i; i++) {
            let timed_id = setInterval(function () {
                let event_date = Date.parse(event_date_divs[i].getAttribute("data-start-event-date"));
                let current_time = Date.now();

                if (current_time >= event_date) {
                    countdown_divs[i].innerHTML = "event started/ended";
                    clearInterval(timed_id);
                    return;
                }

                let buf = "";
                let days = Math.floor((event_date - current_time) / 86400000);
                let hours = Math.floor(((event_date - current_time) / 3600000) % 24);
                let minutes = Math.floor(((event_date - current_time) / 60000) % 60);
                let seconds = Math.floor(((event_date - current_time) / 1000) % 60);

                if (days > 0) {
                    buf = days + " д.";
                }

                if (hours > 0 || buf !== "") {
                    if (buf !== "") {
                        buf += "" + String(hours) + " ч.";
                    } else {
                        buf = String(hours) + " ч.";
                    }
                }

                if (minutes > 0 || buf !== "") {
                    if (buf !== "") {
                        buf += "" + String(minutes) + " м.";
                    } else {
                        buf = String(minutes) + " м.";
                    }
                }

                if (seconds > 0 || buf !== "") {
                    if (buf !== "") {
                        buf += "" + String(seconds) + " с.";
                    } else {
                        buf = String(seconds) + " с.";
                    }
                }

                countdown_divs[i].innerHTML = buf;
            }, 1000);
        }
    </script>
</body>

</html>